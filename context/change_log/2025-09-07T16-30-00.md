제목: M5.5 리팩토링 계획 추가, 로드맵 최신화 및 데모/레이아웃/렌더러 개선 반영

- 문서 업데이트: `context/implement-plan.md`
  - 로드맵 상태 갱신
    - M2.5 데모 최소구동: 완료(핵심 기능 동작)
    - M2.6 커스텀 컨트롤러: 완료(전체화면/자막 토글/시킹/볼륨/키보드)
    - M3 시나리오 파서: 완료(정규화/검증)
    - M4 플러그인 합성: 완료(last-wins/compose add|multiply|replace)
    - M5 레이아웃: 부분 완료(position/anchor/size/transform/override/safeAreaClamp, flow/grid, overlap push/stack)
    - M6 타임라인: 진행 중(rAF 기반, rVFC 전환 예정)
  - M5.5 리팩토링 스프린트 추가(신규)
    - 목표: Stage/TrackManager/Renderer/Style 유틸 경계 분리, 앵커 유틸 공용화, 순환 의존 점검
    - 체크리스트: Stage(오버레이 bounds/리스너), TrackManager(overlap push/stack), StyleApply(applyTextStyle 이관·변환 일원화), Anchors 유틸 분리, Renderer 오케스트레이션 추출, 문서 업데이트
    - 수용 기준: typecheck/build 통과, 데모 동작 동일, 역할 분리 명확
    - 소요/리스크: 0.5~1일, 회귀 위험 낮음(데모 수동 검증 포함)
  - Next Up 조정: ① M5.5 리팩토링 → ② M6 rVFC+snapToFrame → ③ M7 PluginLoader(무결성→Blob import) → ④ M8 PortalManager 기본 동작

- 기타 정렬
  - 검증 항목 보강: 전체화면/리사이즈 시 오버레이 동기 재배치 명시, 브라우저 수동 검증 플래그 추가
  - 런타임/레이아웃 설명에서 실제 사용 모듈 반영(StyleApply 사용 중 등)

- 코드 변경(요약)
  - Renderer(`src/index.ts`)
    - 그룹 단위 마운트/업데이트로 구조 정리(큐 루트 컨테이너 + 텍스트 자식)
    - 레이아웃 모드별 배치: flow/grid/absolute 지원, track.overlapPolicy(push/stack/ignore) 최소 연동
    - 오버레이 바운즈 동기화: ResizeObserver/loadedmetadata/fullscreenchange 기반 content box 매칭
    - 플러그인 체인 합성 연동: `composeActive(evalBuiltin)` 결과를 `applyChannels`로 반영
    - 텍스트 스타일 적용(폰트/스트로크/outline 기본값) 추가
  - LayoutEngine(`src/layout/LayoutEngine.ts`)
    - anchor 기반 translate% 적용 + transform 파이프라인(scale/rotate/skew/translate)
    - safeAreaClamp: stage/track safeArea 병합 후 position/size 클램프(측정 기반 지원)
    - size 정규화(0..1)/auto, overflow/transformOrigin/override(mode:"absolute") 처리
    - flow 컨테이너(세로 스택, anchor 정렬, gapRel px 변환), grid 컨테이너(간단 2열, gapRel) 추가
  - Demo(`demo/index.html`, `demo/main.ts`)
    - 샘플 드롭다운 확장 및 적용 플로우, 커스텀 컨트롤러 마운트, Safe Area 개발용 UI 추가
    - 상태 표시(현재 시간/활성 큐) 및 에러 핸들링 보강
  - Samples(`demo/samples/*.json`)
    - v1.3 키 정규화/사소한 값 조정
  - Docs(`docs/M3.md`, `CLAUDE.md`)
    - M3 파서 분석 문서 확장 및 가이드 문서 정리

- 상태
  - 문서 + 코드 변경 포함(데모/레이아웃/렌더러 개선)
  - 다음 단계: M5.5 리팩토링 실행(Stage/TrackManager/Renderer 분리) 후 rVFC 전환 추진
