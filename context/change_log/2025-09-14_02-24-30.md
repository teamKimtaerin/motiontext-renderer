# 변경 로그 (문제 중심 요약)

- 문제: 빠른 seek(3~4회 왕복) 시 DOM 기반 플러그인 애니메이션이 멈춤
  - 원인: DOM 플러그인 상태 키 불일치로 cleanup 누락 발생
    - 마운트된 노드 키: `cueId:nodeId`(복합 키)
    - 플러그인 상태 저장: `node.id`(단일 키)
    - 언마운트가 복합 키로 호출되어 기존 상태/타임라인이 정리되지 않고 잔존 → 재마운트 시 오래된 상태가 잘못 재사용되어 진행도 적용이 무효화

- 해결: 상태 키 일관화 및 정리 로직 보강
  - 엘리먼트에 `data-node-key="<cueId>:<nodeId>"` 주석 추가(마운트 시)
  - DOM 플러그인 평가 시 `data-node-key` 우선 사용, 없으면 `data-node-id` 폴백
  - cleanup 시 복합 키로 못 찾으면 콜론 뒤 `node.id`로도 재시도하여 레거시 상태 정리

- 영향 파일:
  - `src/core/RendererV2.ts:271`(data-node-key 주석)
  - `src/core/RendererV2.ts:585`(nodeKey 우선 사용)
  - `src/core/RendererV2.ts:764`(cleanup 폴백)
  - `src/core/RendererV2.ts:969`(기존 nodeId 유지 주석)

- 검증 포인트:
  - 데모에서 DOM 플러그인(glow/magnetic) 로드 후 시크 왕복 3–5회 시 애니메이션 지속 동작
  - “No seekFunction found” 경고 미발생
